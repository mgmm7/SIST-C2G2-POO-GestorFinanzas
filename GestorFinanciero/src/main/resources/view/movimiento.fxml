<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="pe.edu.upeu.gestorfinanciero.controller.MovimientoController"
            prefWidth="900" prefHeight="500">
    <children>

        <!-- Título principal -->
        <Label text="Gestión de Categorías" layoutX="20" layoutY="20"
               style="-fx-font-size: 20; -fx-font-weight: bold;"/>

        <!-- ✅ NUEVO: Label de saldo total -->
        <Label fx:id="lblSaldoActual" text="Saldo total: S/ 0.00"
               layoutX="680" layoutY="20"
               style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2e7d32;"/>

        <!-- Panel de acciones -->
        <Accordion layoutX="20" layoutY="60" prefWidth="350" prefHeight="350">
            <panes>
                <TitledPane text="Crear Categoría">
                    <content>
                        <VBox spacing="10">
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                            <TextField fx:id="txtNuevaCategoria" promptText="Nombre de categoría"/>
                            <Button text="Guardar" onAction="#crearCategoria"/>
                        </VBox>
                    </content>
                </TitledPane>

                <TitledPane text="Asignar Presupuesto">
                    <content>
                        <VBox spacing="10">
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                            <ComboBox fx:id="cbxCategoriaPresupuesto" promptText="Selecciona categoría"/>
                            <TextField fx:id="txtPresupuesto" promptText="Monto presupuesto"/>
                            <Button text="Asignar" onAction="#asignarPresupuesto"/>
                        </VBox>
                    </content>
                </TitledPane>

                <TitledPane text="Asignar Límite">
                    <content>
                        <VBox spacing="10">
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                            <ComboBox fx:id="cbxCategoriaLimite" promptText="Selecciona categoría"/>
                            <TextField fx:id="txtLimite" promptText="Monto límite"/>
                            <Button text="Asignar" onAction="#asignarLimite"/>
                        </VBox>
                    </content>
                </TitledPane>

                <TitledPane text="Editar / Ver Categoría">
                    <content>
                        <VBox spacing="10">
                            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                            <ComboBox fx:id="cbxCategoriaEditar" promptText="Selecciona categoría"/>
                            <Button text="Editar o Eliminar" onAction="#editarOCategorias"/>
                        </VBox>
                    </content>
                </TitledPane>
            </panes>
        </Accordion>

        <!-- Tabla de categorías -->
        <TableView fx:id="tablaCategorias" layoutX="400" layoutY="60"
                   prefWidth="470" prefHeight="350">
            <columns>
                <TableColumn fx:id="colNombre" text="Nombre" prefWidth="120"/>
                <TableColumn fx:id="colPresupuesto" text="Presupuesto" prefWidth="100"/>
                <TableColumn fx:id="colLimite" text="Límite" prefWidth="100"/>
                <TableColumn fx:id="colSaldoDisp" text="Saldo Disp." prefWidth="130"/>
            </columns>
        </TableView>

    </children>
</AnchorPane>